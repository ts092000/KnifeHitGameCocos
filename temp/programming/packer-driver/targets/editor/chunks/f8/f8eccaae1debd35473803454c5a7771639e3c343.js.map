{"version":3,"sources":["file:///C:/Users/ADMIN/ThrowKnifeGame/assets/Scripts/Game.ts"],"names":["_decorator","Component","Node","tween","Vec3","instantiate","ccclass","property","Game","type","onLoad","canThrow","spriteWood","setSiblingIndex","spriteKnife","spriteWoodRotation","arrayKnife","defaultSpriteKnife","position","node","on","EventType","TOUCH_START","knifeThrow","onDestroy","off","start","update","deltaTime","angle","knife","rad","Math","PI","r","y","setPosition","x","cos","sin","z","spriteKnifeMove","to","call","knifeNode","addChild","push","console","log","active"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, tween, Vec3, instantiate } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Game')\r\nexport class Game extends Component {\r\n    @property({type:Node})\r\n        spriteWood: Node\r\n\r\n    @property({type:Node})\r\n        spriteKnife: Node\r\n\r\n    static canThrow: boolean = false;\r\n    static spriteWoodRotation: number = null;\r\n    static defaultSpriteKnife = null;\r\n    static arrayKnife: Node[] = [];\r\n\r\n    onLoad() {\r\n        Game.canThrow = true;\r\n        this.spriteWood.setSiblingIndex(2);\r\n        this.spriteKnife.setSiblingIndex(1);\r\n        Game.spriteWoodRotation = 1.5;\r\n        Game.arrayKnife = [];\r\n        Game.defaultSpriteKnife = this.spriteKnife.position;\r\n\r\n        this.node.on(Node.EventType.TOUCH_START, this.knifeThrow, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        this.node.off(Node.EventType.TOUCH_START, this.knifeThrow, this);\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        this.spriteWood.angle = (this.spriteWood.angle + Game.spriteWoodRotation) % 360;\r\n\r\n        for (let knife of Game.arrayKnife) {\r\n            knife.angle = (knife.angle + Game.spriteWoodRotation) % 360;\r\n\r\n            let rad = Math.PI * (knife.angle - 90) / 180;\r\n            let r = this.spriteWood.position.y / 2;\r\n\r\n            knife.setPosition(new Vec3(this.spriteWood.position.x + r * Math.cos(rad), this.spriteWood.position.y + r * Math.sin(rad), this.spriteWood.position.z + 1000));\r\n        }\r\n    }\r\n\r\n    knifeThrow() {\r\n        if (Game.canThrow) {\r\n            Game.canThrow = false;\r\n            let spriteKnifeMove = tween(this.spriteKnife)\r\n                .to(0.25, {position: new Vec3(this.spriteWood.position.x, this.spriteWood.position.y / 2, this.spriteWood.position.z)})\r\n                .call(() => {\r\n                    let knifeNode = instantiate(this.spriteKnife);\r\n                    knifeNode.setPosition(this.spriteKnife.position);\r\n                    this.node.addChild(knifeNode);\r\n                    Game.arrayKnife.push(knifeNode);\r\n\r\n                    this.spriteKnife.setPosition(Game.defaultSpriteKnife);\r\n                    console.log(this.spriteKnife.position);\r\n                    console.log(this.spriteKnife.active);\r\n                    this.spriteKnife.active = true;\r\n                    Game.canThrow = true;\r\n                });\r\n            spriteKnifeMove.start();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}